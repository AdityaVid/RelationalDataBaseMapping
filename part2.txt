CREATE TABLE User (
Name CHAR(20),
DOB DATE,
UID INTEGER,
PRIMARY KEY (UID));

CREATE TABLE Seller (
Is_Active BOOLEAN,
UID INTEGER,
PRIMARY KEY (UID),
FOREIGN KEY (UID) REFERENCES User
ON DELETE CASCADE);

CREATE TABLE Purchase (
Buyer_ID INTEGER,
Owner_ID INTEGER,
PRIMARY KEY (Buyer_ID, Owner_ID),
FOREIGN KEY (Buyer_ID) REFERENCES Seller,
FOREIGN KEY (Owner_ID) REFERENCES Seller);

CREATE TABLE Buyer (
Registeration_Date DATE,
UID INTEGER,
PRIMARY KEY (UID),
FOREIGN KEY (UID) REFERENCES User 
ON DELETE CASCADE);

CREATE TABLE Bookmark_List (
Name CHAR(20),
UID INTEGER NOT NULL,
PRIMARY KEY (Name, UID),
FOREIGN KEY (UID) REFERENCES Buyer
ON DELETE CASCADE);

CREATE TABLE Interaction (
Rate REAL,
Seller_ID INTEGER,
Buyer_ID INTEGER,
LID INTEGER,
PRIMARY KEY (Seller_ID, Buyer_ID, LID),
FOREIGN KEY (Seller_ID) REFERENCES Seller,
FOREIGN KEY (Buyer_ID) REFERENCES Buyer,
FOREIGN KEY (LID) REFERENCES Listing);

CREATE TABLE Listing (
LID INTEGER,
Product_Name CHAR(20),
CID integer,
Seller_ID INTEGER NOT NULL,
PRIMARY KEY (LID),
FOREIGN KEY (CID) REFERENCES Condition,
FOREIGN KEY (Seller_ID) REFERENCES Seller
ON DELETE NO ACTION);

CREATE TABLE Listing_Tag (
LID INTEGER,
tag CHAR(15),
PRIMARY KEY (LID, tag),
FOREIGN KEY (LID) REFERENCES Listing
ON DELETE CASCADE);

CREATE TABLE Saved_Listing (
LID INTEGER,
UID INTEGER,
PRIMARY KEY (LID, UID),
FOREIGN KEY (LID) REFERENCES Listing,
FOREIGN KEY (UID) REFERENCES Buyer);

CREATE TABLE Bookmarked_In (
LID INTEGER,
Name CHAR(20),
UID INTEGER,
PRIMARY KEY (LID, Name, UID),
FOREIGN KEY (LID) REFERENCES Listing,
FOREIGN KEY (Name, UID) REFERENCES Bookmark_List);

CREATE TABLE Condition (
CID INTEGER,
Details CHAR(20),
PRIMARY KEY (CID));
